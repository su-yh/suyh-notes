





主库

```ini
# 1. 启用逻辑复制（WAL 级别设为 logical）
wal_level = logical  # 默认为 replica，需改为 logical（核心）
max_wal_senders = 10  # 最大复制连接数（≥1，根据从库数量调整）
wal_keep_size = 64MB  # 保留 WAL 日志大小（防止从库同步滞后时日志被清理）
max_replication_slots = 10  # 复制槽数量（≥从库数量，避免主库清理未同步的 WAL）

# 2. 可选：优化复制性能
shared_buffers = 1GB  # 按内存调整（建议物理内存的 25%）
wal_buffers = 16MB    # WAL 缓冲区（默认自动，可手动调大）
```

