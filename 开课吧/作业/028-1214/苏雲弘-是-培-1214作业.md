## 作业内容：

### 1、MessageQueueSelector的作用是什么？

关键词:队列选择器、定义分区选择

> 生产者投递 消息到topic中时，在topic中会有多个队列，这条消息具体到哪一个队列中是不确定的。默认情况下，我们使用轮询策略或者增强轮询策略。但是这种策略不能保证消息的有序性。
>
> 在某些场景下，我们需要保证消息的有序性，往往需要这些消息在同一个队列中存放，且消费者以同一个线程对某进行消费。
>
> MessageQueueSelector的作用就是实现这种策略的接口，在生产者端使其进入到同一个队列中。而在消费者端以相同的策略获取这个队列 中的消息消费。

### 2、RocketMQ延迟消息实现原理?

关键词:SCHEDULE_TOPIC_XXXX、定时线程

> 所有的延迟消息由producer发出之后，都会存放到同一个topic(SCHEDULE_TOPIC_XXX)下，根据延迟level的个数，创建对应数量的队列，也就是说18个level对应了18个队列。不同的延迟级别会对应不同的队列序号，当延迟时间到了之后，由定时线程读取转换为普通 的消息存到真实指定的topic下，此时对于consumer端此消息才可见，从而被消费。

### 3、什么是消息回查？

关键词: 二次确认丢失、主动向消息生产者询问该消息的最终状态

> 由于网络闪断、生产者应用重启等原因，导致某条事务消息的二次确认丢失，消息队列服务端 通过扫描发现某条消息长期牌“半事务消息”时，就会主动向消息生产者访问该消息的最终状态，该访问过程就是消息回查。